(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f4e7a9b"],{"0031":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){t.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(11),o=n(16),r=n(18),s=Object.defineProperty;e.f=n(0)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(8),o=r(i);function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){t.exports={default:n(9),__esModule:!0}},function(t,e,n){n(19);var i=n(2).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(1);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(10);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(1),o=n(4).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,n){var i=n(4),o=n(2),r=n(12),s=n(15),a="prototype",c=function(t,e,n){var u,l,m,f=t&c.F,d=t&c.G,h=t&c.S,p=t&c.P,v=t&c.B,y=t&c.W,g=d?o:o[e]||(o[e]={}),_=g[a],C=d?i:h?i[e]:(i[e]||{})[a];for(u in d&&(n=e),n)l=!f&&C&&void 0!==C[u],l&&u in g||(m=l?C[u]:n[u],g[u]=d&&"function"!=typeof C[u]?n[u]:v&&l?r(m,i):y&&C[u]==m?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[a]=t[a],e}(m):p&&"function"==typeof m?r(Function.call,m):m,p&&((g.virtual||(g.virtual={}))[u]=m,t&c.R&&_&&!_[u]&&s(_,u,m)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var i=n(5),o=n(17);t.exports=n(0)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(0)&&!n(3)((function(){return 7!=Object.defineProperty(n(13)("div"),"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(1);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(14);i(i.S+i.F*!n(0),"Object",{defineProperty:n(5).f})},function(t,e,n){var i,o,r;(function(s,a){o=[t,e,n(6),n(7)],i=a,r="function"===typeof i?i.apply(e,o):i,void 0===r||(t.exports=r)})(0,(function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n),r=s(i);function s(t){return t&&t.__esModule?t:{default:t}}var a=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,c=0,u=1,l={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"};function m(){}var f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;(0,o.default)(this,t),this.lrc=e,this.tags={},this.lines=[],this.handler=n,this.state=c,this.curLine=0,this._init()}return(0,r.default)(t,[{key:"_init",value:function(){this._initTag(),this._initLines()}},{key:"_initTag",value:function(){for(var t in l){var e=this.lrc.match(new RegExp("\\["+l[t]+":([^\\]]*)]","i"));this.tags[t]=e&&e[1]||""}}},{key:"_initLines",value:function(){for(var t=this.lrc.split("\n"),e=0;e<t.length;e++){var n=t[e],i=a.exec(n);if(i){var o=n.replace(a,"").trim();o&&this.lines.push({time:60*i[1]*1e3+1e3*i[2]+10*(i[3]||0),txt:o})}}this.lines.sort((function(t,e){return t.time-e.time}))}},{key:"_findCurNum",value:function(t){for(var e=0;e<this.lines.length;e++)if(t<=this.lines[e].time)return e;return this.lines.length-1}},{key:"_callHandler",value:function(t){t<0||this.handler({txt:this.lines[t].txt,lineNum:t})}},{key:"_playRest",value:function(){var t=this,e=this.lines[this.curNum],n=e.time-(+new Date-this.startStamp);this.timer=setTimeout((function(){t._callHandler(t.curNum++),t.curNum<t.lines.length&&t.state===u&&t._playRest()}),n)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];this.lines.length&&(this.state=u,this.curNum=this._findCurNum(t),this.startStamp=+new Date-t,e||this._callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this._playRest()))}},{key:"togglePlay",value:function(){var t=+new Date;this.state===u?(this.stop(),this.pauseStamp=t):(this.state=u,this.play((this.pauseStamp||t)-(this.startStamp||t),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state=c,clearTimeout(this.timer)}},{key:"seek",value:function(t){this.play(t)}}]),t}();e.default=f,t.exports=e["default"]}))}])}))},"3ad1":function(t,e,n){},"679f":function(t,e,n){"use strict";n("3ad1")},7669:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"playDetails-container"}},[t.isReady?n("div",{staticClass:"example"},[n("a-spin",{attrs:{tip:"努力加载中...",size:"large"}})],1):n("div",{staticClass:"playDetails_content"},[n("div",{staticClass:"play_bottom"},[n("div",{staticClass:"play_l"},[n("img",{attrs:{src:t.songData.al.picUrl,alt:"logo"}})]),n("div",{staticClass:"play_r"},[n("div",{staticClass:"play_top"},[n("p",{staticClass:"title"},[t._v(t._s(t.songData.name))]),n("p",[t._v(t._s(t.songData.ar[0].name))])]),n("div",{staticClass:"lyric_content"},[n("div",{ref:"lyricContent",staticClass:"lyric"},[t._l(t.playLyric.lines,(function(e,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:t.playLyric.lines,expression:"playLyric.lines"}],key:i,ref:"lyricLine",refInFor:!0,staticClass:"lyric_list",class:{current:t.currentLineNum===i}},[t._v(" "+t._s(e.txt)+" ")])})),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.playLyric.lines&&!1===t.noLyric,expression:"!playLyric.lines && noLyric === false"}],staticStyle:{"margin-top":"100px",color:"#42b983","font-size":"30px"}},[t._v("歌词正在加载...")]),n("p",{directives:[{name:"show",rawName:"v-show",value:!0===t.noLyric,expression:"noLyric === true"}],staticStyle:{"margin-top":"100px",color:"#42b983","font-size":"30px"}},[t._v("本歌曲为纯音乐，请您欣赏。")])],2)])])]),n("div",{staticClass:"comment_content"},[n("div",{staticClass:"publish_content"},[n("p",[t._v("评论(已有"+t._s(t.total)+"条评论)")]),n("a-textarea",{attrs:{placeholder:"输入评论内容...","auto-size":{minRows:2,maxRows:6}},model:{value:t.rightCommentData.content,callback:function(e){t.$set(t.rightCommentData,"content",e)},expression:"rightCommentData.content"}}),n("a-button",{staticStyle:{width:"100px","margin-top":"10px"},attrs:{type:"primary"},on:{click:t.rightComment}},[t._v(" 发表 ")])],1),n("p",{staticClass:"title"},[t._v("精彩评论")]),t._l(t.hotComment,(function(e){return n("div",{key:e.id,staticClass:"comment_list"},[n("img",{attrs:{src:e.user.avatarUrl,alt:"加载失败"},on:{click:function(n){return t.toUserDetail(e)}}}),n("div",{staticClass:"comment_text"},[n("div",[n("span",{staticStyle:{cursor:"pointer",color:"cornflowerblue"},attrs:{title:"查看用户"},on:{click:function(n){return t.toUserDetail(e)}}},[t._v(t._s(e.user.nickname)+"：")]),n("span",[t._v(t._s(e.content))])]),n("div",{staticClass:"text_bottom"},[n("span",[t._v(t._s(t._f("dateFormatIn")(e.time)))]),n("div",{staticClass:"bottom_btn"},[e.user.userId===t.userId?n("span",{on:{click:function(n){return t.showDelComment(e)}}},[t._v("删除")]):t._e(),n("span",{staticClass:"like",class:[!0===e.liked?"red":""],attrs:{title:!0===e.liked?"取消点赞":"点赞"},on:{click:function(n){return t.likeMusicComment(e)}}},[n("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(e.likedCount))],1),n("span",{on:{click:function(n){return t.showCommentModal(e)}}},[t._v("评论")]),n("span",[t._v("分享")])])])])])})),n("hr"),n("p",{staticClass:"title"},[t._v("最新评论")]),t._l(t.allComment,(function(e){return n("div",{key:e.id,staticClass:"comment_list"},[n("img",{attrs:{src:e.user.avatarUrl,alt:"加载失败"},on:{click:function(n){return t.toUserDetail(e)}}}),n("div",{staticClass:"comment_text"},[n("div",[n("span",{staticStyle:{cursor:"pointer",color:"cornflowerblue"},attrs:{title:"查看用户"},on:{click:function(n){return t.toUserDetail(e)}}},[t._v(t._s(e.user.nickname)+"：")]),n("span",[t._v(t._s(e.content))])]),n("div",{staticClass:"text_bottom"},[n("span",[t._v(t._s(t._f("dateFormatIn")(e.time)))]),n("div",{staticClass:"bottom_btn"},[e.user.userId===t.userId?n("span",{on:{click:function(n){return t.showDelComment(e)}}},[t._v("删除")]):t._e(),n("span",{staticClass:"like",class:[!0===e.liked?"red":""],attrs:{title:!0===e.liked?"取消点赞":"点赞"},on:{click:function(n){return t.likeMusicComment(e)}}},[n("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(e.likedCount)+" ")],1),n("span",{on:{click:function(n){return t.showCommentModal(e)}}},[t._v("评论")]),n("span",[t._v("分享")])])])])])}))],2),n("div",{ref:"bbox"},[n("a-modal",{attrs:{"mask-closable":!1,closable:!1,"get-container":function(){return t.$refs.bbox},title:"评论",width:"600px"},model:{value:t.commentModal,callback:function(e){t.commentModal=e},expression:"commentModal"}},[n("div",{staticClass:"toComment"},[n("p",[t._v("回复："+t._s(t.commentUser))]),n("p",{staticClass:"text"},[t._v(t._s(t.commentText))])]),n("a-input",{attrs:{type:"textarea",placeholder:"输入评论内容"},model:{value:t.rightCommentData.content,callback:function(e){t.$set(t.rightCommentData,"content",e)},expression:"rightCommentData.content"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{on:{click:t.commentChange}},[t._v("确定")]),n("a-button",{on:{click:function(e){t.commentModal=!1}}},[t._v("取消")])],1)],1)],1)]),n("a-modal",{attrs:{title:"提示"},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[n("span",[t._v("确定要删除吗？")]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{attrs:{type:"danger",loading:t.loading},on:{click:t.delCommentChange}},[t._v("确定")]),n("a-button",{on:{click:function(e){t.delModal=!1}}},[t._v("取消")])],1)])],1)},o=[],r=n("15a9"),s=n("053b"),a=n("cc49"),c=n("0031"),u=n.n(c),l=n("7736"),m={name:"PlayDetails",data:function(){return{noLyric:!1,commentModal:!1,delModal:!1,loading:!1,songData:{ar:[{name:""}],al:{picUrl:""}},commentRes:{id:"",limit:""},likeCommentRes:{id:"",cid:"",t:1,type:0},delData:{t:0,type:0,id:"",commentId:""},rightCommentData:{t:1,type:0,id:"",content:"",commentId:""},allComment:[],hotComment:[],total:0,commentText:"",commentUser:"",playLyric:null,currentLineNum:0,isReady:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(l["c"])({songId:function(t){return t.songId}})),Object(l["c"])(["playStatus","userId"])),watch:{songId:function(t,e){var n=this;n.$router.push({path:"/PlayDetails",query:{id:t}}),this.$refs.lyricContent.style="top: 0px",this.getSongLyric(t),this.getSongDetails(t),this.getMusicCommentList(t)}},created:function(){var t=this.$route.query.id;this.getSongLyric(t),this.getSongDetails(t),this.getMusicCommentList(t)},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["playBtnAction"])),{},{getSongLyric:function(t){var e=this;this.isReady=!0,Object(s["b"])(t).then((function(t){e.playLyric=new u.a(t.lrc.lyric,e.handleLyric),e.playStatus&&e.playLyric.play(),e.isReady=!1}))},handleLyric:function(t){var e=t.lineNum;t.txt;if(e>3){var n=-40*(e-3);this.$refs.lyricContent.style="top:"+n+"px"}this.currentLineNum=e},getSongDetails:function(t){var e=this;Object(s["a"])(t).then((function(t){e.songData=t.songs[0]}))},getMusicCommentList:function(t){var e=this;this.commentRes.id=t,Object(a["a"])(this.commentRes).then((function(t){e.total=t.total,e.hotComment=t.hotComments,e.allComment=t.comments}))},showCommentModal:function(t){this.commentText=t.content,this.commentUser=t.user.nickname,this.rightCommentData.id=this.$route.query.id,this.rightCommentData.commentId=t.commentId,this.commentModal=!0},commentChange:function(){var t=this;this.rightCommentData.t=2,""!==this.rightCommentData.content?Object(a["d"])(this.rightCommentData).then((function(e){console.log(e),t.commentModal=!1,t.$message.success("评论成功"),t.rightCommentData.content="",t.getMusicCommentList(t.$route.query.id)})):this.$message.warning("未输入内容！")},showDelComment:function(t){this.delData.commentId=t.commentId,this.delModal=!0},delCommentChange:function(){var t=this;this.loading=!0,this.delData.id=this.$route.query.id,Object(a["d"])(this.delData).then((function(e){console.log(e),t.delModal=!1,t.loading=!1,t.$message.success("已删除"),t.getMusicCommentList(t.$route.query.id)})).catch((function(){t.loading=!1}))},likeMusicComment:function(t){var e=this,n=this;this.likeCommentRes.id=this.$route.query.id,this.likeCommentRes.cid=t.commentId,!1===t.liked?(this.likeCommentRes.t=1,Object(a["c"])(this.likeCommentRes).then((function(t){e.$message.success("点赞成功");var i=n.$route.query.id;n.getMusicCommentList(i)}))):(this.likeCommentRes.t=0,Object(a["c"])(this.likeCommentRes).then((function(t){e.$message.success("已取消");var i=n.$route.query.id;n.getMusicCommentList(i)})))},rightComment:function(){var t=this;this.rightCommentData.t=1,this.rightCommentData.id=this.$route.query.id,this.rightCommentData.commentId="",""!==this.rightCommentData.content?Object(a["d"])(this.rightCommentData).then((function(e){t.$message.success("评论成功"),t.rightCommentData.content="",t.getMusicCommentList(t.$route.query.id)})):this.$message.warning("未输入内容！")},toUserDetail:function(t){this.$router.push({path:"/UserDetails",query:{userId:t.user.userId}})}})},f=m,d=(n("679f"),n("5d22")),h=Object(d["a"])(f,i,o,!1,null,null,null);e["default"]=h.exports},cc49:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}));var i=n("b775");function o(t){return Object(i["a"])({url:"/comment/music",method:"GET",params:t})}function r(t){return Object(i["a"])({url:"/comment",method:"GET",params:t})}function s(t){return Object(i["a"])({url:"/comment/like",method:"GET",params:t})}function a(t){return Object(i["a"])({url:"/comment/mv",method:"GET",params:t})}}}]);